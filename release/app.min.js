var Canvas=function(){function t(t,o){this.canvas=document.querySelector(t),this.ctx=this.canvas.getContext("2d"),this.container=o,this.init()}return t.prototype.init=function(){this.updateCalculatedWidth(),window.addEventListener("resize",this.updateCalculatedWidth.bind(this))},t.prototype.updateCalculatedWidth=function(){var t=this.canvas.getBoundingClientRect();this.canvas.width=t.width,this.canvas.height=t.height},t.prototype.draw=function(t){},t.prototype.setActive=function(t){void 0===t&&(t=!0),t?this.canvas.classList.add("active-canvas"):this.canvas.classList.remove("active-canvas")},t}(),Container=function(){function t(){}return t.prototype.initWithElements=function(t,o){this.toolbar=o,this.canvas=t},t.prototype.setCanvasActive=function(t){void 0===t&&(t=!0),this.canvas.setActive(t)},t.prototype.draw=function(t){},t}(),Point=function(){function t(t,o){this.x=t,this.y=o}return t.prototype.draw=function(){},t}(),Toolbar=function(){function t(t,o){this.toolbar=document.querySelector(t),this.container=o,this.init()}return t.prototype.init=function(){this.bindEventListeners(),this.getButtons(),this.addEventListeners()},t.prototype.bindEventListeners=function(){this.pickUpToolListener=this.pickUpTool.bind(this),this.putDownToolListener=this.putDownTool.bind(this),this.moveToolListener=this.moveTool.bind(this)},t.prototype.getButtons=function(){this.buttons=[];for(var t=this.toolbar.querySelectorAll(".btn"),o=0;o<t.length;o++)this.buttons.push(t[o])},t.prototype.addEventListeners=function(){for(var t=0;t<this.buttons.length;t++)this.buttons[t].addEventListener("click",this.pickUpToolListener)},t.prototype.removeEventListeners=function(){for(var t=0;t<this.buttons.length;t++)this.buttons[t].removeEventListener("click",this.pickUpToolListener)},t.prototype.pickUpTool=function(t){console.log("Picking up"),this.currentTool=t.currentTarget,this.currentToolIcon=t.currentTarget.querySelector("i"),this.currentToolIcon.classList.add("active-icon"),this.moveTool(t),this.removeEventListeners(),this.disableButtonHover(),this.setCanvasActive(!0),t.currentTarget.addEventListener("click",this.putDownToolListener),document.body.addEventListener("mousemove",this.moveToolListener)},t.prototype.putDownTool=function(t){console.log("Putting down"),this.currentToolIcon.classList.remove("active-icon"),this.currentTool=null,this.currentToolIcon=null,document.body.removeEventListener("mousemove",this.moveToolListener),t.currentTarget.removeEventListener("click",this.putDownToolListener),this.setCanvasActive(!1),this.addEventListeners()},t.prototype.moveTool=function(t){this.currentToolIcon.style.left=t.clientX+"px",this.currentToolIcon.style.top=t.clientY-this.currentToolIcon.getBoundingClientRect().height+"px"},t.prototype.disableButtonHover=function(){this.currentTool.classList.add("no-hover")},t.prototype.enableButtonHover=function(){this.currentTool.classList.remove("no-hover")},t.prototype.setCanvasActive=function(t){void 0===t&&(t=!0),this.container.setCanvasActive(t)},t}(),c=new Container,cv=new Canvas("canvas",c),tb=new Toolbar(".toolbar",c);c.initWithElements(cv,tb);