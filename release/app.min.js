var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Tool=function(){function t(t,e){this.container=e,this.toolElement=t,this.toolElementIcon=t.querySelector("i")}return t.prototype.setActive=function(t){t?this.enableDrawListener():this.disableDrawListener()},t.prototype.moveTool=function(t){this.toolElementIcon.style.left=t.clientX+"px",this.toolElementIcon.style.top=t.clientY-this.toolElementIcon.getBoundingClientRect().height+"px"},t.prototype.float=function(){this.toolElementIcon.classList.add("active-icon")},t.prototype.drop=function(){this.toolElementIcon.classList.remove("active-icon")},t.prototype.disableButtonHover=function(){this.toolElement.classList.add("no-hover")},t.prototype.enableButtonHover=function(){this.toolElement.classList.remove("no-hover")},t}(),Brush=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.enableDrawListener=function(){},e.prototype.disableDrawListener=function(){},e}(Tool),Canvas=function(){function t(t,e){this.canvas=document.querySelector(t),this.ctx=this.canvas.getContext("2d"),this.container=e,this.drawables=[],this.init()}return t.prototype.init=function(){this.updateCalculatedWidth(),window.addEventListener("resize",this.updateCalculatedWidth.bind(this))},t.prototype.updateCalculatedWidth=function(){var t=this.canvas.getBoundingClientRect();this.canvas.width=t.width,this.canvas.height=t.height},t.prototype.draw=function(){for(var t=0;t<this.drawables.length;t++)this.drawables[t].draw(this.ctx)},t.prototype.setActive=function(t){void 0===t&&(t=!0),t?this.canvas.classList.add("active-canvas"):this.canvas.classList.remove("active-canvas")},t.prototype.addDrawable=function(t){},t}(),Circle=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.enableDrawListener=function(){},e.prototype.disableDrawListener=function(){},e}(Tool),Container=function(){function t(){}return t.prototype.initWithElements=function(t,e){this.toolbar=e,this.canvas=t},t.prototype.setCanvasActive=function(t){void 0===t&&(t=!0),this.canvas.setActive(t)},t.prototype.draw=function(t){},t}(),Factory=function(){function t(){}return t.prototype.class=function(t){return window[t]},t}(),Pencil=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.enableDrawListener=function(){},e.prototype.disableDrawListener=function(){},e}(Tool),Point=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.draw=function(){},t}(),Square=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.enableDrawListener=function(){},e.prototype.disableDrawListener=function(){},e}(Tool),Toolbar=function(){function t(t,e){this.toolbar=document.querySelector(t),this.container=e,this.factory=new Factory,this.init()}return t.prototype.init=function(){this.bindEventListeners(),this.getButtons(),this.addEventListeners()},t.prototype.bindEventListeners=function(){this.pickUpToolListener=this.pickUpTool.bind(this),this.putDownToolListener=this.putDownTool.bind(this),this.moveToolListener=this.moveTool.bind(this)},t.prototype.getButtons=function(){this.buttons=[];for(var t=this.toolbar.querySelectorAll(".btn"),e=0;e<t.length;e++)this.buttons.push(t[e])},t.prototype.addEventListeners=function(){for(var t=0;t<this.buttons.length;t++)this.buttons[t].addEventListener("click",this.pickUpToolListener)},t.prototype.removeEventListeners=function(){for(var t=0;t<this.buttons.length;t++)this.buttons[t].removeEventListener("click",this.pickUpToolListener)},t.prototype.pickUpTool=function(t){console.log("Picking up");var e=t.currentTarget;this.currentTool=new(this.factory.class(e.getAttribute("data-class")))(e,this.container),this.currentTool.float(),this.currentTool.moveTool(t),this.removeEventListeners(),this.currentTool.disableButtonHover(),this.setCanvasActive(!0),t.currentTarget.addEventListener("click",this.putDownToolListener),document.body.addEventListener("mousemove",this.moveToolListener)},t.prototype.putDownTool=function(t){console.log("Putting down"),this.currentTool.drop(),this.currentTool.enableButtonHover(),document.body.removeEventListener("mousemove",this.moveToolListener),t.currentTarget.removeEventListener("click",this.putDownToolListener),this.setCanvasActive(!1),this.addEventListeners(),this.currentTool=null},t.prototype.setCanvasActive=function(t){void 0===t&&(t=!0),this.container.setCanvasActive(t)},t.prototype.moveTool=function(t){this.currentTool.moveTool(t)},t}(),c=new Container,cv=new Canvas("canvas",c),tb=new Toolbar(".toolbar",c);c.initWithElements(cv,tb);